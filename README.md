# ü§ñ Telegram AI –ë–æ—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π tool calling

–ë–æ—Ç –¥–ª—è Telegram —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö –º–æ–¥–µ–ª–µ–π (—á–µ—Ä–µ–∑ API) –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (`tool_call`). –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–∏—Å—å–º–∞, —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ –∏—Å–∫–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã, –∞ —Ç–∞–∫–∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

   ```env
   TELEGRAM_TOKEN=...
   TELEGRAM_MAIN_CHAT_ID=...
   OPENAI_API_BASE=...
   OPENAI_API_KEY=...
   OPENAI_API_MODEL=/qwen3
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:

   ```bash
   docker compose up -d
   ```

3. –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É –≤ Telegram.

---

## üß∞ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (tool calls)

–ë–æ—Ç —É–º–µ–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:

### üìß `send_email`

–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ –ø–æ email.

```json
{
  "to_email": "user@example.com",
  "subject": "–¢–µ–º–∞ –ø–∏—Å—å–º–∞",
  "body": "–¢–µ–∫—Å—Ç –ø–∏—Å—å–º–∞"
}
```

---

### üí¨ `send_message`

–û—Ç–≤–µ—Ç–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º.

```json
{
  "text": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –º–æ–≥—É –ø–æ–º–æ—á—å?"
}
```

---

### üìá `add_contact`

–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç.

```json
{
  "name": "–ê–ª–µ–∫—Å–µ–π",
  "phone": "+79991234567",
  "email": "alex@example.com"
}
```

---

### üìã `list_contacts`

–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã.

```json
{}
```

---

### üîç `resolve_contact`

–ù–∞–π—Ç–∏ email –ø–æ –∏–º–µ–Ω–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞.

```json
{
  "name": "–ê–ª–µ–∫—Å–µ–π",
  "user_id": 412940515
}
```

---

## üìù –ó–∞–º–µ—Ç–∫–∏

* –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ PostgreSQL.
* –î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω–µ—à–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è `send_email` –∏–∑ `mail.py`.
* Tool calling –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–¥–µ–ª–∏ (—Å–º. `tool_choice` –∏ `tools`).
